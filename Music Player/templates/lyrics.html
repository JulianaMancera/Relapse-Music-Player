<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Lyrics – Relapse</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
  <style>
    /* (same CSS you posted – copy from your <DOCUMENT filename="lyrics.txt">) */
    body{background:url('/static/shi.png') center fixed;background-size:cover;display:flex;justify-content:center;align-items:center;height:100vh;color:#f0e6d2;overflow-y:auto}
    .lyrics-container{background:rgba(0,0,0,.85);border-radius:20px;padding:40px;text-align:center;width:80%;max-width:800px;box-shadow:0 20px 40px rgba(0,0,0,.5)}
    h2{color:#ff6b81;font-size:2.5em;text-shadow:2px 2px 4px rgba(0,0,0,.7);margin-bottom:20px}
    #lyrics-content{text-align:left;font-size:1.2em;line-height:1.6;color:#a3e4d7;text-shadow:1px 1px 3px rgba(0,0,0,.5);max-height:60vh;overflow-y:auto;padding:20px;background:rgba(163,228,215,.1);border-radius:10px}
    #lyrics-content::-webkit-scrollbar{width:6px}
    #lyrics-content::-webkit-scrollbar-track{background:rgba(163,228,215,.1);border-radius:3px}
    #lyrics-content::-webkit-scrollbar-thumb{background:rgba(163,228,215,.4);border-radius:3px}
    button{background:rgba(163,228,215,.2);border:none;color:#f0e6d2;font-size:1.3em;cursor:pointer;margin-top:20px;padding:10px 20px;border-radius:25px;transition:.3s}
    button:hover{background:rgba(163,228,215,.4);color:#ff6b81}
  </style>
</head>
<body>
<div class="lyrics-container">
  <h2>Lyrics</h2>
  <div id="lyrics-content">Loading…</div>
  <button onclick="window.location.href='/player'">Back to Player</button>
</div>
<script>
  function loadLyrics(){
    fetch('/api/state').then(r=>r.json()).then(s=>{
      fetch('/api/playlist').then(r=>r.json()).then(pl=>{
        const idx = s.current_index;
        if(idx>=0 && idx<pl.length){
          const txt = pl[idx].replace(/\.mp3$/i,'.txt');
          fetch(`/lyrics/${txt}`).then(r=>r.text()).then(t=>{
            document.getElementById('lyrics-content').textContent = t||'No lyrics';
          }).catch(()=>{document.getElementById('lyrics-content').textContent='Not found';});
        }else{
          document.getElementById('lyrics-content').textContent='No song';
        }
      });
    });
  }
  window.onload=loadLyrics;
</script>
</body>
</html>